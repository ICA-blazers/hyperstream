<!doctype html>

<html lang="en-US">
<head>
<meta charset="UTF-8" />
<title> ICA Blazers | Homepage</title>
<script src="https://apis.google.com/js/client.js?onload=OnLoadCallback"></script>
<script src="bower_components/jquery/dist/jquery.min.js"></script>
<script></script>
<link href="style.css" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Gloria+Hallelujah' rel='stylesheet' type='text/css'>
<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <script src="https://cdn.firebase.com/js/client/2.2.4/firebase.js"></script>

<script src="js/belatedPNG.js"></script>
<script>
	DD_belatedPNG.fix('*');
</script>
    <script>
        $(function() {
            $.ajax({
                method: 'GET',
                url: 'https://www.google.com/calendar/feeds/tucddft45vep5q3ipj6elgnqog@group.calendar.google.com/public/basic?alt=json'
            }).then(function(data) {
                var events = data.feed.entry || []; //    USE HERE    https://developers.google.com/gdata/docs/json
                var html = [];
                var eventSorted = [];

                for (var j = 0; j < events.length; ++j) {
                    var event = events[j];
                    var title = (event.title.type == 'html') ? event.title.$t : escape(event.title.$t);
                    var when = (event.summary.$t.substring(event.summary.$t.indexOf("When:")+6, event.summary.$t.indexOf('\u003cbr')));
                    if (event.summary.$t.indexOf('\n\u003cbr\u003eEvent Description:') != -1){
                        var description = (event.summary.$t.substring(event.summary.$t.indexOf('\n\u003cbr\u003eEvent Description:')+36));
                    }
                    else {
                        var description = ('');
                    }
                    var where = (event.summary.$t.substring(event.summary.$t.indexOf('\u003eWhere:')+8, event.summary.$t.indexOf('\n\u003cbr\u003eEvent Status:')));

                    var eventMonth = event.summary.$t.substring(event.summary.$t.indexOf('When: ')+10, event.summary.$t.indexOf('When: ')+13).toLowerCase();
                    var eventYear = parseInt(event.summary.$t.substring(event.summary.$t.indexOf(', ') + 2, event.summary.$t.indexOf(', ') + 6));
                    var eventDay = parseInt(event.summary.$t.substring(event.summary.$t.indexOf(', ') - 2, event.summary.$t.indexOf(', ')));

                    var monthList = {
                        'jan': 1,
                        'feb': 2,
                        'mar': 3,
                        'apr': 4,
                        'may': 5,
                        'jun': 6,
                        'jul': 7,
                        'aug': 8,
                        'sep': 9,
                        'oct': 10,
                        'nov': 11,
                        'dec': 12
                    };
                    var eventMonthNumber = monthList[eventMonth];

                    var eventObject = {
                        id: j,
                        title: title,
                        year: eventYear,
                        month: eventMonthNumber,
                        day: eventDay,
                        when: when,
                        description: description,
                        where: where
                    };
                    eventSorted.push(eventObject);
                };

                eventSorted.sort(function (a,b){
                    if (a.year > b.year) return 1;
                    if (a.year == b.year && a.month > b.month) return 1;
                    if (a.year == b.year && a.month < b.month) return -1;
                    if (a.year == b.year && a.month == b.month && a.day > b.day) return 1;
                    if (a.year == b.year && a.month == b.month && a.day < b.day) return -1;
                    if (a.year == b.year && a.month == b.month && a.day == b.day) return 0;
                    if (a.year < b.year) return -1;
                });

                for (var i= 0,counter=0; i < events.length && counter < 5; ++i) {

                    var currentDate = new Date();
                    var currentDay = currentDate.getDate();
                    var currentMonth = currentDate.getMonth() + 1;
                    var currentYear = currentDate.getFullYear();

                    if (
                            eventSorted[i].year > currentYear ||
                            eventSorted[i].year == currentYear && eventSorted[i].month > currentMonth ||
                            eventSorted[i].year == currentYear && eventSorted[i].month == currentMonth && eventSorted[i].day >= currentDay
                    ){
                        html.push(
                                '<div class="eventTitle">',
                                eventSorted[i].title,
                                '</div>',
                                '<div class="eventTime">',
                                eventSorted[i].when,
                                '</div>');
                        counter+=1
                    }
                }
                document.getElementById("upcomingEvents").innerHTML = html.join("");
            })
        });
    </script>
    <script>
        var fb = new Firebase("https://amber-heat-8120.firebaseio.com"),
                currentPollValues,
                currentOptions = ['test'];
        fb.child('poll').on('value', function(snapshot) {
            currentPollValues = snapshot.val();
        });

        fb.child('options').once('value', function(snap){
            snap.forEach(function(message){
                var options = message.val();
                currentOptions = currentOptions + ',' + options;
            })
        });
        function poll (pollChoice){
            currentPollValues[pollChoice] = (currentPollValues[pollChoice] || 0) + 1;
            fb.child('poll').set(currentPollValues);

            var currentOptionsArray = currentOptions.split(',');
            var HTML= [];
            var pollTotal = 0;
            for (var i=0; i < currentPollValues.length; i++) {
                pollTotal = currentPollValues[i]+ pollTotal;
            }
            for (var j=0; j < currentPollValues.length; j++) {
                var width = Math.round((currentPollValues[j]/pollTotal)*100);
                HTML.push(
                        "<div class='pollTitle'>" + currentOptionsArray[j+1] + ":" + "</div>" +
                        "<img class='pollBar' width= " + 2*width + 'px' + " height='20px'>" +
                        "<div class='pollPercent'>" + " " + width + '%' + "</div>"
                )
            }
            document.getElementById('poll').innerHTML = HTML.join("")
        }

    </script>


</head>

<body>
<div id="locker">
<div id="wrap">

    <div id="board">
        <section id="left">
	<header id="mainheader">

    <h1 id="sitename"></h1>
    </header>
    <nav id="mainnav">
		<ul class="notepad-links">
        	<li><a href="index.html" class="active">Home</a></li>
            <li><a href="tips.html">Tips</a></li>
            <li><a href="calendar.html">Calendar</a></li>
            <li><a href="Math.html">Math</a></li>
            <li><a href="english.html">English</a></li>
            <li><a href="science.html">Science</a></li>
        </ul>
	</nav>
    <section id="events">
        <div id="upcomingEvents"></div>
    </section>
    <section id="sidebar">
        <div class="sb-block">
        </div>

    <div class="sb-block">
    </section>

</section>

<section id="right">


	<<header id="pageheader">
   		<div id="intro">
        	<div id="introwrap">
            <h2></h2>

            </div>


        </div>
    </header>


    <section id="contents">
        <div id="video">
            <iframe width="420" height="315" src="https://www.youtube.com/embed/RuED1e3VTu8" frameborder="0" allowfullscreen></iframe>
        </div>
            <!--<h2 class="subhead">Tip of the Day</h2> -->
            <div class="imagepost">
                <img src="images/stickynote_tip1.png" width="100%">
            </div>


    <section id="homemain" style="border-radius: 10px">
    <article class="post" style="border-radius: 10px">
    <header>
    <h2><a href="#"></a></h2>
    <span class="articlemeta"><a href="#"></a></span>

    </header>
    <div class="entry">

    <p><span font-size="14px"><b>Everyone at some point in their school career has been stressed out.</b></span> Whether it be because or sports, friendships, jobs, or test anxiety it happens to everyone. With this website, not only will you get simple tips on how to help you to calm down and use your time wisely, bu you will get a calendar that will help you know when assignments are due, when tests will be held and when school events will be.  <a href="#"></a></p>
        <p>Planners are one of the most beneficial things you can do not only for your grades but just to organize your life. Things you should put in your planner include assignments, tests, quizzes, and after school events you will be attending so you can plan out when you have time to study. In order for your planner to really work for you, you should use it every single day. Check it in the morning, check it at night, and throughout the day write what you need to be doing. Highlight any assignments that are important or certain assignments that are tests with different colors. For example, highlight tests with a pink highlighter and any homework assignments with a yellow highlighter. This will help you categorize certain things. You could also use sticky notes to mark down when certain events will be, such as a project being due. Using a planner will help you track down what you need to do and help everything be planned accordingly. It also reduces a lot of stress. Writing down assignments helps you feel more in control of things. Good luck, students! Happy planning!  </p>
    </div>
        </article>

    <!--</article>
        <a href="blog.html"><img src="images/View%20more.png" width="135" height="36" alt="view more"></a>
    </section>-->

    </section>
        <section id="photos">
            <span id="poll">
                <h1>How many hours of homework do you do every night?</h1>
                <form>
                    0 hours:
                    <input type="radio" name="vote" value='0' onclick="poll(this.value)"><br>
                    1-2 hours:
                    <input type="radio" name="vote" value='1' onclick="poll(this.value)"><br>
                    2-3 hours:
                    <input type="radio" name="vote" value='2' onclick="poll(this.value)"><br>
                    3+ hours:
                    <input type="radio" name="vote" value='3' onclick="poll(this.value)"><br>
                </form>
            </span>
        </section>


        <div class="clear"></div>
    </section>
</section>



</div>

<footer id="pagefooter">

</div>
</div>

</footer>
</body>
</html>
